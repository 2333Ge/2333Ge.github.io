(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{626:function(e,r,t){"use strict";t.r(r);var v=t(10),_=Object(v.a)({},(function(){var e=this,r=e._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h2",{attrs:{id:"网页性能测试"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#网页性能测试"}},[e._v("#")]),e._v(" 网页性能测试")]),e._v(" "),r("ul",[r("li",[e._v("使用 "),r("a",{attrs:{href:"https://developer.chrome.com/docs/lighthouse/overview?hl=zh-cn",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lighthouse"),r("OutboundLink")],1),e._v(" 测试")])]),e._v(" "),r("h2",{attrs:{id:"性能的一般注意事项"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#性能的一般注意事项"}},[e._v("#")]),e._v(" 性能的一般注意事项")]),e._v(" "),r("ol",[r("li",[e._v("减少重定向：即使是跨域重定向，也需要注意是否存在多次重定向，如： http => https、到站内又触发同源重定向等")]),e._v(" "),r("li",[e._v("缓存HTML响应\n"),r("ol",[r("li",[e._v("较短的生命周期，能减少请求数量，且确保能定期更新")]),e._v(" "),r("li",[e._v("使用"),r("code",[e._v("ETag")]),e._v("、"),r("code",[e._v("Last-modified")]),e._v("请求头，但是注意重新验证资源新鲜度本身也会消耗网络资源")])])])]),e._v(" "),r("blockquote",[r("p",[e._v("每当资源发生变化时，都必须生成新的 "),r("code",[e._v("ETag")]),e._v(" 值。在后续请求中，浏览器会通过 "),r("a",{attrs:{href:"https://developer.mozilla.org/docs/Web/HTTP/Headers/If-None-Match",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("If-None-Match")]),e._v(" 请求标头"),r("OutboundLink")],1),e._v("发送 "),r("code",[e._v("ETag")]),e._v(" 值。如果服务器上的 "),r("code",[e._v("ETag")]),e._v(" 与浏览器发送的资源匹配，服务器将做出 "),r("code",[e._v("304 Not Modified")]),e._v(" 响应，浏览器将使用缓存中的资源。虽然这仍然会导致网络延迟，但 "),r("code",[e._v("304 Not Modified")]),e._v(" 响应比整个 HTML 资源要小得多")])]),e._v(" "),r("ol",{attrs:{start:"3"}},[r("li",[e._v("衡量服务器响应时间：静态网页TTFB通常更低，但客户端提取数据的环境不可预测，最大限度地减少客户端工作量通常有助于提高以用户为中心的指标")]),e._v(" "),r("li",[e._v("压缩：压缩 HTML、JavaScript、CSS 和 SVG 图片，缩减通过网络传输的数据量。\n"),r("ol",[r("li",[e._v("尽可能使用 Brotli")]),e._v(" "),r("li",[e._v("文件大小至关重要")]),e._v(" "),r("li",[e._v("了解动态压缩与静态压缩")])])]),e._v(" "),r("li",[e._v("内容分发网络（CDN）："),r("a",{attrs:{href:"https://web.dev/articles/content-delivery-networks?hl=zh-cn",target:"_blank",rel:"noopener noreferrer"}},[e._v("内容分发网络 (CDN)"),r("OutboundLink")],1),e._v(" 是一个分布式服务器网络，从您的源服务器缓存资源，进而从物理上距离用户更近的边缘服务器传送资源。由于靠近用户的物理位置可以缩短"),r("a",{attrs:{href:"https://en.wikipedia.org/wiki/Round-trip_delay",target:"_blank",rel:"noopener noreferrer"}},[e._v("往返时间 (RTT)"),r("OutboundLink")],1),e._v("，而 HTTP/2 或 HTTP/3、缓存和压缩等优化技术可让 CDN 更快地提供内容（与从源服务器提取内容相比）。在某些情况下，使用 CDN 可以显著改善您网站的 TTFB。")])]),e._v(" "),r("h2",{attrs:{id:"优化资源加载"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#优化资源加载"}},[e._v("#")]),e._v(" 优化资源加载")]),e._v(" "),r("p",[e._v("HTML资源中影响网页加载时间的一些概念：渲染阻塞、解析器屏蔽、预加载扫描程序。")]),e._v(" "),r("p",[r("strong",[e._v("渲染阻塞")]),e._v("： CSS 是一种阻塞渲染的资源，因为它会在构建 "),r("a",{attrs:{href:"https://developer.mozilla.org/docs/Web/API/CSS_Object_Model",target:"_blank",rel:"noopener noreferrer"}},[e._v("CSS 对象模型 (CSSOM)"),r("OutboundLink")],1),e._v(" 之前阻止浏览器渲染任何内容。浏览器会阻止呈现，以防止出现"),r("a",{attrs:{href:"https://en.wikipedia.org/wiki/Flash_of_unstyled_content",target:"_blank",rel:"noopener noreferrer"}},[e._v("无样式内容闪烁 (FOUC)"),r("OutboundLink")],1),e._v("，这从用户体验的角度来看是不可取的。")]),e._v(" "),r("p",[r("strong",[e._v("解析器屏蔽")]),e._v("：解析器阻止资源会中断 HTML 解析器，例如没有 "),r("code",[e._v("async")]),e._v(" 或 "),r("code",[e._v("defer")]),e._v(" 属性的 "),r("code",[e._v("<script>")]),e._v(" 元素。当解析器遇到 "),r("code",[e._v("<script>")]),e._v(" 元素时，浏览器需要先评估并执行脚本，然后才能继续解析 HTML 的其余部分。这是特意设计的，因为在 DOM 构建过程中，脚本可能会修改或访问 DOM。")]),e._v(" "),r("p",[r("strong",[e._v("预加载扫描程序")]),e._v("：一种浏览器优化功能，它采用辅助 HTML 解析器的形式，可扫描原始 HTML 响应，以便先找到资源并进行推测性提取，然后再让主要 HTML 解析器发现这些资源。例如，预加载扫描程序允许浏览器开始下载 "),r("code",[e._v("<img>")]),e._v(" 元素中指定的资源，即使在提取和处理 CSS 和 JavaScript 等资源时 HTML 解析器遭到阻止，也是如此。")]),e._v(" "),r("p",[e._v("为了充分利用预加载扫描器，关键资源应包含在服务器发送的 HTML 标记中。预加载扫描程序无法发现以下资源加载模式：")]),e._v(" "),r("ul",[r("li",[e._v("由 CSS 使用 "),r("code",[e._v("background-image")]),e._v(" 属性加载的图片。这些图片引用位于 CSS 中，并且预加载扫描器无法发现这些引用。")]),e._v(" "),r("li",[e._v("动态加载的脚本，采用 "),r("code",[e._v("<script>")]),e._v(" 元素标记的形式，使用 JavaScript 或使用"),r("a",{attrs:{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/import",target:"_blank",rel:"noopener noreferrer"}},[e._v("动态 "),r("code",[e._v("import()")]),r("OutboundLink")],1),e._v(" 加载的模块注入 DOM。")]),e._v(" "),r("li",[e._v("使用 JavaScript 在客户端上呈现的 HTML。此类标记包含在 JavaScript 资源的字符串中，预加载扫描程序无法发现此类标记。")]),e._v(" "),r("li",[e._v("CSS "),r("code",[e._v("@import")]),e._v(" 声明。")])]),e._v(" "),r("h3",{attrs:{id:"css-优化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#css-优化"}},[e._v("#")]),e._v(" CSS 优化")]),e._v(" "),r("ol",[r("li",[e._v("缩减CSS文件大小")]),e._v(" "),r("li",[e._v("移除未使用的CSS\n")])]),e._v(" "),r("h2",{attrs:{id:"参考资料"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[e._v("#")]),e._v(" 参考资料")]),e._v(" "),r("p",[e._v("[1] "),r("a",{attrs:{href:"https://web.dev/learn/performance/welcome?hl=zh-cn",target:"_blank",rel:"noopener noreferrer"}},[e._v("web.dev “性能”课程"),r("OutboundLink")],1)])])}),[],!1,null,null,null);r.default=_.exports}}]);